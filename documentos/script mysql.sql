-- MySQL Script generated by MySQL Workbench
-- Fri Sep 16 11:37:47 2016
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema tfc
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema tfc
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `tfc` DEFAULT CHARACTER SET utf8 ;
USE `tfc` ;

-- -----------------------------------------------------
-- Table `tfc`.`empresas`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `tfc`.`empresas` ;

CREATE TABLE IF NOT EXISTS `tfc`.`empresas` (
  `idempresa` INT NOT NULL AUTO_INCREMENT,
  `nombreempresa` VARCHAR(45) NULL,
  PRIMARY KEY (`idempresa`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `tfc`.`usuarios`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `tfc`.`usuarios` ;

CREATE TABLE IF NOT EXISTS `tfc`.`usuarios` (
  `idusuario` INT NOT NULL AUTO_INCREMENT,
  `usuario` VARCHAR(45) NULL,
  `password` VARCHAR(45) NULL,
  `tipouser` VARCHAR(45) NULL,
  `nombre` VARCHAR(45) NULL,
  `empresas_idempresa` INT NOT NULL,
  PRIMARY KEY (`idusuario`, `empresas_idempresa`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `tfc`.`controles`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `tfc`.`controles` ;

CREATE TABLE IF NOT EXISTS `tfc`.`controles` (
  `Idcontrol` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NULL,
  `pla-appcc` VARCHAR(45) NULL,
  `valorminimo` INT NULL,
  `valormaximo` INT NULL,
  `objetivo` INT NULL,
  `tolerancia` INT NULL,
  `critico` INT NULL,
  `periodicidad` INT NULL,
  `tipoperiodo` VARCHAR(45) NULL,
  `empresas_idempresa` INT NOT NULL,
  PRIMARY KEY (`Idcontrol`, `empresas_idempresa`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `tfc`.`checklist`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `tfc`.`checklist` ;

CREATE TABLE IF NOT EXISTS `tfc`.`checklist` (
  `idchecklist` INT NOT NULL AUTO_INCREMENT,
  `empresas_idempresas` INT NOT NULL,
  `nombrechecklist` VARCHAR(45) NULL,
  PRIMARY KEY (`idchecklist`, `empresas_idempresas`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `tfc`.`controlchecklist`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `tfc`.`controlchecklist` ;

CREATE TABLE IF NOT EXISTS `tfc`.`controlchecklist` (
  `idcontrolchecklist` INT NOT NULL AUTO_INCREMENT,
  `checklist_empresas_idempresas` INT NOT NULL,
  `nombre` VARCHAR(45) NULL,
  PRIMARY KEY (`idcontrolchecklist`, `checklist_empresas_idempresas`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `tfc`.`permissionusercontrol`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `tfc`.`permissionusercontrol` ;

CREATE TABLE IF NOT EXISTS `tfc`.`permissionusercontrol` (
  `idPermissionusercontrol` INT NOT NULL AUTO_INCREMENT,
  `controles_idcontroles` INT NOT NULL,
  `usuarios_idusuarios` INT NOT NULL,
  PRIMARY KEY (`idPermissionusercontrol`, `controles_idcontroles`, `usuarios_idusuarios`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `tfc`.`permissionuserchecklist`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `tfc`.`permissionuserchecklist` ;

CREATE TABLE IF NOT EXISTS `tfc`.`permissionuserchecklist` (
  `idpermissionuserchecklist` INT NOT NULL AUTO_INCREMENT,
  `usuario_idusuario` INT NOT NULL,
  `checklist_idchecklist` INT NOT NULL,
  PRIMARY KEY (`idpermissionuserchecklist`, `usuario_idusuario`, `checklist_idchecklist`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `tfc`.`resultadoschecklistcontrol`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `tfc`.`resultadoschecklistcontrol` ;

CREATE TABLE IF NOT EXISTS `tfc`.`resultadoschecklistcontrol` (
  `idresultadochecklist` INT NOT NULL AUTO_INCREMENT,
  `controlchecklist_idcontrolchecklist` INT NOT NULL,
  `resultado` TINYINT(1) NULL,
  `descripcion` VARCHAR(200) NULL,
  PRIMARY KEY (`idresultadochecklist`, `controlchecklist_idcontrolchecklist`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `tfc`.`ResultadosControl`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `tfc`.`ResultadosControl` ;

CREATE TABLE IF NOT EXISTS `tfc`.`ResultadosControl` (
  `idResultadosControl` INT NOT NULL AUTO_INCREMENT,
  `Controles_idControles` INT NOT NULL,
  `resultado` INT NULL,
  `Fecha` DATETIME NULL,
  `foto` VARCHAR(45) NULL,
  PRIMARY KEY (`idResultadosControl`, `Controles_idControles`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `tfc`.`checklist_has_Permissionuserchecklist`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `tfc`.`checklist_has_Permissionuserchecklist` ;

CREATE TABLE IF NOT EXISTS `tfc`.`checklist_has_Permissionuserchecklist` (
  `checklist_Empresas_idEmpresas` INT NOT NULL,
  `checklist_idChecklist` INT NOT NULL,
  `Permissionuserchecklist_idPermissionuserchecklist` INT NOT NULL,
  `Permissionuserchecklist_Usuarios_idUsuarios` INT NOT NULL,
  PRIMARY KEY (`checklist_Empresas_idEmpresas`, `checklist_idChecklist`, `Permissionuserchecklist_idPermissionuserchecklist`, `Permissionuserchecklist_Usuarios_idUsuarios`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `tfc`.`resultadoschecklist`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `tfc`.`resultadoschecklist` ;

CREATE TABLE IF NOT EXISTS `tfc`.`resultadoschecklist` (
  `idresultadochecklist` INT NOT NULL AUTO_INCREMENT,
  `fecha` VARCHAR(45) NULL,
  `foto` VARCHAR(45) NULL,
  `checklist_idChecklist` INT NOT NULL,
  PRIMARY KEY (`idresultadochecklist`, `checklist_idChecklist`))
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
